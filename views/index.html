{% include 'header.html' %}
<style type="text/css">
	input#form-message {
	  width: 82%;
	}
	.form-group {
	  width: 100%;
	}
</style>
<div class="col-md-4 col-md-offset-4">
	<ul id="chat">
		{% for value in responds %}
			<li>{{value.username}}: {{value.message}}</li>
		{% endfor %}
	</ul>
	<form id="form-new-message" class="form-inline" action="/" method="post">
		<div class="form-group">
			<input id="form-message" class="form-control" type="text" required="required" name="message" placeholder="New Message...">
			<input type="submit" value="Send" class="btn">
		</div>
	</form>
</div>
<script type="text/javascript" src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
<script src="https://cdn.socket.io/socket.io-1.3.7.js"></script>
<script>
	var url = $(location).attr('href');
	var socket = io.connect(url);
	$('#form-new-message').submit(function(event){
		event.preventDefault();
		socket.emit('send message',$('#form-message').val());
		$('#form-message').val('');
	});

	socket.on('new message',function(data){
		$('#chat').append('<li>'+data+'</li>')
	});
</script>
{% include 'footer.html' %}